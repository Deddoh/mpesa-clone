<div class="session mat-indigo">
    <div class="session-content">
      <div class="session-wrapper">
<mat-card fxLayout="column" fxLayoutAlign="center center">
    <form [formGroup]="form" >
      <div class="text-center pb-1">
        <img src="assets/images/mpesaLogo.png" width="150" height="140" alt="" />
        <h3 class="mat-text-muted">Mpesa Quikk Pay</h3>
        <h4 *ngIf="!showRegistration;else showSignUp;" class="mat-text-muted">Sign In</h4>
        <ng-template #showSignUp class="mat-text-muted">Sign Up</ng-template>
      </div>
      <hr />
      <ng-container *ngIf="errorMessage">
        <div class="mb-lg-15 alert alert-danger">
          <div class="alert-text">
            {{errorMessage}}
          </div>
        </div>
      </ng-container>
      <div fxLayout="column" fxLayoutAlign="space-around">
      
        <div class="form-group">
          <label for="">Email/Username</label>
          <input class="form-control" type="email" name="username" autocomplete="off" formControlName="email" />
          <small *ngIf="form.controls['email'].hasError('required') && form.controls['email'].touched"
            class="mat-text-warn">Email
            is required.</small>
            <small *ngIf="form.controls['email'].hasError('pattern') && form.controls['email'].touched"
            class="mat-text-warn">Invalid email format.</small>
        </div>

        <!-- <div class="form-group">
          <label for="">Phone Number</label>
          <div class="input-group">
          <input class="form-control form-control-lg form-control-solid" [type]="fieldTextType ? 'text' : 'phone'"  type="tel" name="phone"
            autocomplete="off" formControlName="phone" />
          
            </div>
          <small *ngIf="form.controls['phone'].hasError('required') && form.controls['phone'].touched"
            class="mat-text-warn">Phone is required.</small>
        </div> -->
        <div class="form-group">
          <label for="">Password</label>
          <div class="input-group">
          <input class="form-control form-control-lg form-control-solid" [type]="fieldTextType ? 'text' : 'password'"  type="password" name="password"
            autocomplete="off" formControlName="password" />
            <div class="input-group-append">
              <span class="input-group-text">
                <i  class="fa p-2  fa-eye-slash" [ngClass]="{
                      'fa-eye-slash': !fieldTextType,
                      'fa-eye': fieldTextType
                    }" (click)="toggleFieldTextType()"></i>
              </span>
            </div>
            </div>
          <small *ngIf="form.controls['password'].hasError('required') && form.controls['password'].touched"
            class="mat-text-warn">Password is required.</small>
        </div>
        
      </div>
      <br>
      <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

      <br>
      <div fxLayout="row" fxLayoutAlign="space-between center">
        
        
        <button *ngIf="!showRegistration" type="button" (click)="login(form.value)"
          class="btn btn-md btn-primary " [disabled]="!form.valid">
           Login</button>
           <button *ngIf="showRegistration" type="button" (click)="register(form.value)"
          class="btn btn-md btn-primary " [disabled]="!form.valid">
           Register</button>

        <a *ngIf="!showRegistration" class="float-right toggler" (click)="toggleRegistration($event)">Sign up for a new account.</a>
        <a *ngIf="showRegistration" class="float-right toggler" (click)="toggleRegistration($event)">Login instead</a>

        </div>
 <br>
     
   
    </form>
  </mat-card>
</div>
</div>
</div>